<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>D!CTATOR</title>

<style>
body {
  background: black;
  color: white;
  font-family: Arial;
  text-align: center;
}

.logoText {
  font-size: 60px;
  font-weight: bold;
  margin-top: 20px;
  animation: shake 1s infinite;
}

.logoText span {
  color: red;
}

@keyframes shake {
  0% { transform: translate(0,0) }
  25% { transform: translate(2px,-2px) }
  50% { transform: translate(-2px,2px) }
  75% { transform: translate(2px,2px) }
  100% { transform: translate(0,0) }
}

table {
  width: 90%;
  margin: auto;
  border-collapse: collapse;
  background: #111;
}

th, td {
  border: 1px solid #555;
  padding: 8px;
}

button {
  padding: 6px 10px;
  margin: 5px;
}
</style>
</head>

<body>

<div class="logoText">D<span>!</span>CTATOR</div>

<h1>ตารางยอดบอล</h1>

<button onclick="addRow()">+ เพิ่ม</button>

<table id="table">
<thead>
<tr>
<th>วันที่</th>
<th>ทุน</th>
<th>กำไร</th>
<th>ลบ</th>
<th>รวม</th>
<th>ลบวัน</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDZ0iBQX1uJz_gf23M6gn8yQ6S90lGYDOc",
  authDomain: "dictator-ball.firebaseapp.com",
  databaseURL: "https://dictator-ball-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "dictator-ball",
  storageBucket: "dictator-ball.firebasestorage.app",
  messagingSenderId: "533340357926",
  appId: "1:533340357926:web:a1eb15b77c335a7a57ade7"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const dataRef = ref(db, "ballTable");

let tableData = [];

function render() {
  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";

  tableData.forEach((row, i) => {
    const tr = document.createElement("tr");

    row.forEach((cell, j) => {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.value = cell;
      input.oninput = () => {
        tableData[i][j] = input.value;
        save();
      };
      td.appendChild(input);
      tr.appendChild(td);
    });

    const del = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "X";
    btn.onclick = () => {
      tableData.splice(i,1);
      save();
    };
    del.appendChild(btn);
    tr.appendChild(del);

    tbody.appendChild(tr);
  });
}

function save() {
  set(dataRef, tableData);
}

window.addRow = function() {
  tableData.push(["","","","",""]);
  save();
};

onValue(dataRef, (snap) => {
  tableData = snap.val() || [];
  render();
});
</script>

</body>
</html>
