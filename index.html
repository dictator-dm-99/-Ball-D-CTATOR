<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>D!CTATOR</title>

<style>
body {
  background: black;
  color: white;
  font-family: Arial;
  text-align: center;
}

h1 {
  font-size: 60px;
  margin: 20px;
  animation: shake 0.5s infinite;
}

@keyframes shake {
  0% { transform: translate(0px,0px); }
  25% { transform: translate(2px,-2px); }
  50% { transform: translate(-2px,2px); }
  75% { transform: translate(2px,2px); }
  100% { transform: translate(0px,0px); }
}

table {
  width: 90%;
  margin: auto;
  border-collapse: collapse;
}

th, td {
  border: 1px solid gray;
  padding: 8px;
  background: #111;
}

input {
  width: 120px;
}

button {
  padding: 5px 10px;
}
</style>
</head>

<body>

<h1>D!CTATOR</h1>
<h2>ตารางยอดบอล</h2>

<button onclick="addRow()">+ เพิ่ม</button>

<table id="table">
<thead>
<tr>
<th>วันที่</th>
<th>ทุน</th>
<th>กำไร</th>
<th>ลบ</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<!-- Firebase -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDZ0iBQX1uJz_gf23M6gn8yQ6S90lGYDOc",
  authDomain: "dictator-ball.firebaseapp.com",
  databaseURL: "https://dictator-ball-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "dictator-ball",
  storageBucket: "dictator-ball.firebasestorage.app",
  messagingSenderId: "533340357926",
  appId: "1:533340357926:web:a1eb15b77c335a7a57ade7"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const dataRef = ref(db, "rows");

window.addRow = function() {
  const date = prompt("วันที่:");
  const fund = prompt("ทุน:");
  const profit = prompt("กำไร:");

  push(dataRef, { date, fund, profit });
};

onValue(dataRef, snapshot => {
  const rows = document.getElementById("rows");
  rows.innerHTML = "";

  snapshot.forEach(child => {
    const d = child.val();
    const key = child.key;

    rows.innerHTML += `
      <tr>
        <td>${d.date}</td>
        <td>${d.fund}</td>
        <td>${d.profit}</td>
        <td><button onclick="del('${key}')">X</button></td>
      </tr>
    `;
  });
});

window.del = function(key) {
  remove(ref(db, "rows/" + key));
};

</script>

</body>
</html>
