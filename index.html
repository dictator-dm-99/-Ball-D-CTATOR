<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>D!CTATOR</title>

<style>
body{
  background:black;
  color:white;
  font-family:Arial;
  text-align:center;
}

/* logo animation */
.logoText{
  font-size:48px;
  font-weight:bold;
  margin:20px;
  animation:logoMove 3s ease-in-out infinite;
}

@keyframes logoMove{
  0%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
  100%{transform:translateY(0)}
}

table{
  width:90%;
  margin:auto;
  border-collapse:collapse;
}

th{
  background:#111;
  padding:8px;
}

td{
  background:#eee;
  color:black;
  padding:6px;
  border:1px solid #555;
}

tfoot td{
  background:black;
  color:white;
  font-weight:bold;
}

input{
  width:100%;
  border:none;
  text-align:center;
  background:white;
}

/* ‡∏Å‡∏≥‡πÑ‡∏£ animation */
.profitNum{
  color:#00ff88;
  font-weight:bold;
  display:inline-block;
  animation:profitBounce .8s infinite alternate;
}

@keyframes profitBounce{
  from{transform:scale(1)}
  to{transform:scale(1.25)}
}

/* ‡∏•‡∏ö animation */
.lossNum{
  color:red;
  font-weight:bold;
  animation:blink 1s infinite;
}

@keyframes blink{
  50%{opacity:0.2}
}

/* ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = ‡πÑ‡∏°‡πà‡∏°‡∏µ animation */
.totalProfit{
  color:#00ff88;
  font-weight:bold;
}

.totalLoss{
  color:red;
  font-weight:bold;
}

button{
  padding:6px 12px;
  margin:4px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="logoText">D!CTATOR</div>
<h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏¢‡∏≠‡∏î‡∏ö‡∏≠‡∏•</h2>

<button onclick="addDay()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô</button>
<button onclick="save()">üíæ Save</button>

<table id="table">
<thead>
<tr>
<th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
<th>‡∏ó‡∏∏‡∏ô</th>
<th>‡∏Å‡∏≥‡πÑ‡∏£</th>
<th>‡∏•‡∏ö</th>
<th>‡∏£‡∏ß‡∏°</th>
<th>‡∏•‡∏ö‡∏ß‡∏±‡∏ô</th>
</tr>
</thead>

<tbody></tbody>

<tfoot>
<tr>
<td>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td>
<td id="sum‡∏ó‡∏∏‡∏ô">0</td>
<td id="sum‡∏Å‡∏≥‡πÑ‡∏£">0</td>
<td id="sum‡∏•‡∏ö">0</td>
<td id="sum‡∏£‡∏ß‡∏°">0</td>
<td></td>
</tr>
</tfoot>
</table>

<script>
function fmt(n){
  return n.toLocaleString();
}

function parse(v){
  return Number(v.replace(/,/g,'')) || 0;
}

function addDay(){
  let tbody = document.querySelector("#table tbody");
  let r = tbody.insertRow();

  r.innerHTML = `
<td><input type="date"></td>
<td><input value="0"></td>
<td><input value="0"></td>
<td><input value="0"></td>
<td><span>0</span></td>
<td><button onclick="removeRow(this)">X</button></td>
`;
}

function removeRow(btn){
  btn.closest("tr").remove();
  calc();
}

function calc(){
  let rows = document.querySelectorAll("#table tbody tr");

  let sum‡∏ó‡∏∏‡∏ô=0,sum‡∏Å‡∏≥‡πÑ‡∏£=0,sum‡∏•‡∏ö=0,sum‡∏£‡∏ß‡∏°=0;

  rows.forEach(r=>{
    let ‡∏ó‡∏∏‡∏ô = parse(r.cells[1].children[0].value);
    let ‡∏Å‡∏≥‡πÑ‡∏£ = parse(r.cells[2].children[0].value);
    let ‡∏•‡∏ö = parse(r.cells[3].children[0].value);

    r.cells[1].children[0].value = fmt(‡∏ó‡∏∏‡∏ô);
    r.cells[2].children[0].value = fmt(‡∏Å‡∏≥‡πÑ‡∏£);
    r.cells[3].children[0].value = fmt(‡∏•‡∏ö);

    let ‡∏£‡∏ß‡∏° = ‡∏ó‡∏∏‡∏ô + ‡∏Å‡∏≥‡πÑ‡∏£ - ‡∏•‡∏ö;

    r.cells[4].innerHTML = fmt(‡∏£‡∏ß‡∏°);

    r.cells[2].children[0].className="profitNum";
    r.cells[3].children[0].className="lossNum";

    sum‡∏ó‡∏∏‡∏ô+=‡∏ó‡∏∏‡∏ô;
    sum‡∏Å‡∏≥‡πÑ‡∏£+=‡∏Å‡∏≥‡πÑ‡∏£;
    sum‡∏•‡∏ö+=‡∏•‡∏ö;
    sum‡∏£‡∏ß‡∏°+=‡∏£‡∏ß‡∏°;
  });

  document.getElementById("sum‡∏ó‡∏∏‡∏ô").innerText = fmt(sum‡∏ó‡∏∏‡∏ô);
  document.getElementById("sum‡∏Å‡∏≥‡πÑ‡∏£").innerHTML = `<span class="totalProfit">${fmt(sum‡∏Å‡∏≥‡πÑ‡∏£)}</span>`;
  document.getElementById("sum‡∏•‡∏ö").innerHTML = `<span class="totalLoss">${fmt(sum‡∏•‡∏ö)}</span>`;
  document.getElementById("sum‡∏£‡∏ß‡∏°").innerText = fmt(sum‡∏£‡∏ß‡∏°);
}

document.addEventListener("input",calc);

function save(){
  alert("Saved!");
}
</script>

</body>
</html>

